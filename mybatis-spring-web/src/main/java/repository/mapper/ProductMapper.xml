<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="repository.mapper.ProductMapper">
	<cache />

	<resultMap type="Product" id="BaseResultMap">
		<!-- id : primary, key 속성명, jdbcType : 데이터베이스 자료형 -->
		<id column="prod_name" jdbcType="VARCHAR" property="prodName" />
		<result column="prod_category" jdbcType="VARCHAR" property="prodCategory" />
		<result column="prod_stock" jdbcType="BIGINT" property="prodStock" />
		<result column="prod_content" jdbcType="VARCHAR" property="prodContent" />
		<result column="prod_price" jdbcType="BIGINT" property="prodPrice" />
		<result column="prod_pic" jdbcType="VARCHAR" property="prodPic" />
		<result column="c_email" jdbcType="VARCHAR" property="cEmail" />
	</resultMap>

	<select id="selectProductListByCondition" parameterType="Product"
		resultMap="BaseResultMap">
		SELECT
			*
		FROM product
	</select>
	
	<select id="selectCompanyProductListByCondition" parameterType="Product"
		resultMap="BaseResultMap">
		SELECT
			*
		FROM product
		<where>
			<if test="value != null">
				c_email = #{value}
			</if>
		</where>
	</select>
	

	<select id="selectProductByCondition" parameterType="Product"
		resultMap="BaseResultMap">
		SELECT
			*
		FROM product
		<where>
			<if test="value != null">
				prod_name = #{value}
			</if>
		</where>
	</select>
	
	<update id="updateProductByCondition" parameterType="Product">
		UPDATE product
			<set >
				<if test="prodCategory !=null">
					prod_category=#{prodCategory},
				</if>
				<if test="prodStock !=null">
					prod_stock=#{prodStock},
				</if>
				<if test="prodContent !=null">
					prod_content=#{prodContent},
				</if>
				<if test="prodPrice !=null">
					prod_price=#{prodPrice},
				</if>
				<if test="prodPic !=null">
					"prod_pic"=#{prodPic},
				</if>
				<if test="cEmail !=null">
					"c_email"=#{cEmail},
				</if>
			</set>
			<where>
				prod_name =#{prodName}
			</where>
	</update>
	
	<insert id="insertProductByCondition" parameterType="Product">
		INSERT INTO
			product(prod_name, prod_category, prod_stock, prod_content,	prod_price, prod_pic, c_email)
		VALUES
			(#{prodName},#{prodCategory},#{prodStock},#{prodContent},#{prodPrice},#{prodPic},#{cEmail})
	</insert>


	<delete id="deleteProductByCondition" parameterType="Product">
		DELETE from
			product
		<where>
			prod_name=#{prodName}
		</where>
	</delete>

</mapper>